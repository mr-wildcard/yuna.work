---
import NavItem from "./NavItem.astro";
import Logo from "./Logo.astro";
import Contact from "../Contact.astro";
---

<header
  id="header"
  data-menu-opened="false"
  class="sticky top-0 bg-neutral1 z-10"
  role="banner"
>
  <div class="container">
    <div id="header-content" class="flex justify-between items-center py-5">
      <div id="logo">
        <Logo />
      </div>

      <nav role="navigation">
        <ul class="hidden lg:flex lg:items-center">
          <li>
            <NavItem to="/" variant="primary">Mes expertises</NavItem>
          </li>
          <li>
            <NavItem to="/collaborations" variant="primary">
              Collaborations
            </NavItem>
          </li>
          <li class="mr-[15px]">
            <NavItem to="/a-propos" variant="primary">À propos</NavItem>
          </li>
          <li>
            <a
              href="#contact"
              class="text-menu-label-highlight text-neutral1 px-5 py-2 rounded-full bg-primary hover:shadow-cta hover:text-primary hover:bg-neutral3"
              >Contactez-moi</a
            >
          </li>
        </ul>
      </nav>

      <button
        id="mobile-menu-opener"
        aria-haspopup="dialog"
        aria-expanded="false"
        class="text-menu-label text-neutral1 px-5 py-[5px] bg-primary rounded-full lg:hidden"
      >
        Menu
      </button>
    </div>
  </div>

  <dialog
    aria-label="Menu"
    id="mobile-menu"
    class="w-full h-full max-w-none max-h-none bg-neutral3"
  >
    <nav role="navigation" class="overflow-y-auto overflow-x-hidden">
      <div class="container">
        <div class="my-5 flex justify-end items-center">
          <form method="dialog" autofocus>
            <button
              id="mobile-menu-closer"
              class="text-menu-label bg-neutral1 px-5 py-[5px] text-primary rounded-full shadow-cta"
            >
              Fermer
            </button>
          </form>
        </div>

        <div class="container">
          <ul class="pt-6 text-primary">
            <li class="mb-6">
              <NavItem to="/" variant="primary">Mes expertises</NavItem>
            </li>
            <li class="mb-6">
              <NavItem to="/collaborations" variant="primary">
                Collaborations
              </NavItem>
            </li>
            <li class="mb-12">
              <NavItem to="/a-propos" variant="primary">À propos</NavItem>
            </li>
            <li class="mb-[30px]">
              <NavItem to="/mentions-legales" variant="secondary">
                Mentions légales
              </NavItem>
            </li>
            <li>
              <NavItem to="/plan-du-site" variant="secondary">
                Plan du site
              </NavItem>
            </li>
          </ul>
        </div>

        <div class="mt-[50px] mb-5">
          <Contact view="inline" />
        </div>
      </div>
    </nav>
  </dialog>
</header>

<style>
  @supports (animation-timeline: scroll(y root)) {
    #header {
      animation-duration: 1ms;
      animation-timing-function: linear;
      animation-fill-mode: forwards;
      animation-range: 0px 1px;
      animation-timeline: scroll(y root);
    }

    #header:not([data-menu-opened="true"]) {
      animation-name: sticky-bg-header;
    }
  }

  @keyframes sticky-bg-header {
    from {
      background-color: var(--color-neutral1);
    }

    to {
      background-color: var(--color-neutral2);
      border-bottom: 1px solid var(--color-primary);
    }
  }
</style>

<script src="./scripts/index.ts"></script>
