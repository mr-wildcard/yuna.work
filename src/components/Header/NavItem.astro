---
const { pathname } = Astro.url;
const { to, class: cssClasses = [], variant } = Astro.props;

interface Props {
  to: string;
  variant: "primary" | "secondary";
  class?: string;
}

const isSelected = pathname.replaceAll("/", "") === to?.replaceAll("/", "");

const HTMLTag = isSelected ? "span" : "a";

const variantCSSClasses =
  variant === "primary"
    ? [
        "text-display-small",
        "lg:text-menu-label",
        { "text-secondary": isSelected },
        { "lg:text-paragraph": isSelected },
      ]
    : ["text-body-normal", "text-secondary"];

const underlineCSSClasses = [
  "after:block",
  "after:w-full",
  "after:h-[4px]",
  "after:rounded-full",
  "after:bg-secondary",
  "lg:after:bg-primary",
  "lg:after:translate-y-[5px]",
];
---

<HTMLTag
  href={!isSelected ? to : undefined}
  class:list={[
    "inline-block",
    isSelected ? underlineCSSClasses : undefined,
    ...variantCSSClasses,
    ...cssClasses,
  ]}
>
  <slot />
</HTMLTag>
